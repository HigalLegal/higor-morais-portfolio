import{a as E}from"./chunk-5OU5EL5D.js";import{a as k}from"./chunk-MAGUGNDK.js";import{a as w}from"./chunk-Y5D3OK6F.js";import"./chunk-GN475L4L.js";import{a as I}from"./chunk-2NGBAERZ.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{n as y}from"./chunk-6BXR4CBA.js";import"./chunk-QQMGSK2W.js";import"./chunk-N6PF2LVR.js";import{a as M}from"./chunk-XFF5VJPY.js";import"./chunk-GQH7GEWZ.js";import"./chunk-7NQHDTFN.js";import{a as P}from"./chunk-QOSKVCJ4.js";import{E as T}from"./chunk-FO7KHA5M.js";import"./chunk-R43BVMU7.js";import{Ab as a,Bb as l,Cb as p,Db as b,Hb as A,Kb as S,Lb as m,Va as c,_a as o,gb as h,ia as g,ja as v,pc as O,sa as n,vb as f,wb as x,x as d,xb as u,yb as C,zb as _}from"./chunk-XWV3PDOS.js";function N(r,e){if(r&1&&(l(0,"div",2),b(1,"app-button-form",4),p()),r&2){let t=m();c(),a("text",t.i18n.register)}}function R(r,e){if(r&1){let t=A();l(0,"app-card",5),S("onAction",function(){let s=g(t).$implicit,D=m();return v(D.handleDelete(s.id))}),p()}if(r&2){let t=e.$implicit,i=e.$index,s=m();a("title",t.title)("description",t.summary)("technologiesUsed",s.textsDescription()[i])("url",t.urlArticle)("urlRouterFormEdit","editar-artigo/"+t.id)}}var V=class r{constructor(e,t,i,s){this.translate=e;this.snackbarService=t;this.tokenService=i;this.articleService=s;this.isAdmin.set(i.isAdmin()),O(()=>this.insertTextsDescriptions())}TRANSLATE_JSON="articles";i18n={technologies:"",technology:"",register:""};articles=n([]);textsDescription=n([]);isLoading=n(!0);isAdmin=n(!1);ngOnInit(){this.insertI18N(),this.searchArticles()}ngAfterViewInit(){setTimeout(()=>{this.isLoading.set(!1)},200)}handleDelete(e){this.articleService.delete(e).subscribe({next:()=>{this.openSnackbar,this.searchArticles()},error:t=>{console.error("Erro inesperado! ",t)}})}searchArticles(){this.articleService.getAll().subscribe({next:e=>{this.articles.set(e)},error:e=>{console.error("Erro inesperado! ",e)}})}openSnackbar(){this.snackbarService.openSnackBarSucess("Artigo exclu\xEDdo com \xEAxito!")}insertTextsDescriptions(){this.articles().length>0&&this.i18n.technologies.length>0&&this.textsDescription.set(this.articles().map(e=>this.generateSentence(e.technologiesCovered)))}generateSentence(e){let t=e.length>1?this.i18n.technologies:this.i18n.technology;return w(t,e)}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}observableRequests(){return[this.recoverValue("technologies"),this.recoverValue("technology"),this.recoverValue("register")]}insertI18N(){d(this.observableRequests()).subscribe({next:([e,t,i])=>{this.i18n={technologies:e,technology:t,register:i}},error:e=>{console.error("Erro inesperado! "+e)}})}static \u0275fac=function(t){return new(t||r)(o(T),o(y),o(M),o(E))};static \u0275cmp=h({type:r,selectors:[["app-articles"]],decls:5,vars:2,consts:[[3,"isLoading"],[1,"articles-container"],[1,"button-form"],[3,"title","description","technologiesUsed","url","urlRouterFormEdit"],["urlRouter","inserir-artigo",3,"text"],[3,"onAction","title","description","technologiesUsed","url","urlRouterFormEdit"]],template:function(t,i){t&1&&(l(0,"app-api-loading",0)(1,"div",1),f(2,N,2,1,"div",2),C(3,R,1,5,"app-card",3,u),p()()),t&2&&(a("isLoading",i.isLoading()),c(2),x(i.isAdmin()?2:-1),c(),_(i.articles()))},dependencies:[k,P,I],styles:[".articles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.articles-container[_ngcontent-%COMP%]   .button-form[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;margin-bottom:20px}.articles-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{max-width:750px;margin-top:20px;padding-bottom:20px;border-bottom:1px solid var(--secondary-color)}.articles-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:last-child{border-bottom:none}","@media (max-width: 790px){.articles-container[_ngcontent-%COMP%]{padding-inline:40px}.articles-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:500px}}@media (max-width: 570px){.articles-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:350px}}@media (max-width: 370px){.articles-container[_ngcontent-%COMP%]{padding-inline:30px}.articles-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:250px}}"]})};export{V as ArticlesComponent};
