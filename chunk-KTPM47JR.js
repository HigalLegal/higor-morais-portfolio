import{a as O}from"./chunk-NHXXQOKI.js";import{a as w}from"./chunk-WNE5X5JO.js";import"./chunk-XGWKEUC7.js";import{a as D}from"./chunk-Y5D3OK6F.js";import"./chunk-GN475L4L.js";import{a as A}from"./chunk-2NGBAERZ.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{n as y}from"./chunk-6BXR4CBA.js";import"./chunk-QQMGSK2W.js";import"./chunk-N6PF2LVR.js";import{a as I}from"./chunk-XFF5VJPY.js";import"./chunk-GQH7GEWZ.js";import"./chunk-7NQHDTFN.js";import{a as k}from"./chunk-QOSKVCJ4.js";import{E as T}from"./chunk-FO7KHA5M.js";import"./chunk-R43BVMU7.js";import{Ab as p,Bb as c,Cb as l,Db as b,Hb as C,Kb as _,Lb as m,Va as a,_a as s,gb as f,ia as g,ja as v,pc as P,sa as n,vb as u,wb as h,x as d,xb as j,yb as x,zb as S}from"./chunk-XWV3PDOS.js";function R(i,e){if(i&1&&(c(0,"div",2),b(1,"app-button-form",5),l()),i&2){let t=m();a(),p("text",t.i18n.register)}}function N(i,e){if(i&1){let t=C();c(0,"app-card-image",6),_("onClick",function(){let o=g(t).$implicit,E=m();return v(E.handleDelete(o.id))}),l()}if(i&2){let t=e.$implicit,r=e.$index,o=m();p("title",t.description)("imageUrl",t.urlImage)("url",t.urlRepository)("technologiesUsed",o.textsDescription()[r])("urlRouterFormEdit","editar-projeto/"+t.id)}}var V=class i{constructor(e,t,r,o){this.translate=e;this.tokenService=t;this.projectService=r;this.snackbarService=o;this.isAdmin.set(t.isAdmin()),P(()=>this.insertTextsDescription())}TRANSLATE_JSON="projects";i18n={technologies:"",technology:"",register:"",edit:""};projects=n([]);textsDescription=n([]);isLoading=n(!0);isAdmin=n(!1);ngOnInit(){this.insertI18N(),this.searchProjects()}ngAfterViewInit(){setTimeout(()=>{this.isLoading.set(!1)},200)}handleDelete(e){this.projectService.delete(e).subscribe({next:()=>{this.openSnackbar(),this.searchProjects()},error:t=>{console.error("Erro inesperado! ",t)}})}searchProjects(){this.projectService.getAll().subscribe({next:e=>{this.projects.set(e)},error:e=>{console.error("Erro inesperado! ",e)}})}insertTextsDescription(){this.i18n.technologies.length>0&&this.projects().length>0&&this.textsDescription.set(this.projects().map(e=>this.generateDescription(e.technologiesWorked)))}generateDescription(e){let t=e.length>1?this.i18n.technologies:this.i18n.technology;return D(t,e)}openSnackbar(){this.snackbarService.openSnackBarSucess("Projeto exclu\xEDdo com exito!")}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}observableRequests(){return[this.recoverValue("technologies"),this.recoverValue("technology"),this.recoverValue("register"),this.recoverValue("edit")]}insertI18N(){d(this.observableRequests()).subscribe({next:([e,t,r,o])=>{this.i18n={technologies:e,technology:t,register:r,edit:o}},error:e=>{console.error("Erro inesperado! "+e)}})}static \u0275fac=function(t){return new(t||i)(s(T),s(I),s(O),s(y))};static \u0275cmp=f({type:i,selectors:[["app-projects"]],decls:6,vars:2,consts:[[3,"isLoading"],[1,"projects-wrapper"],[1,"button-form"],[1,"card-grid"],[3,"title","imageUrl","url","technologiesUsed","urlRouterFormEdit"],["urlRouter","inserir-projeto",3,"text"],[3,"onClick","title","imageUrl","url","technologiesUsed","urlRouterFormEdit"]],template:function(t,r){t&1&&(c(0,"app-api-loading",0)(1,"div",1),u(2,R,2,1,"div",2),c(3,"div",3),x(4,N,1,5,"app-card-image",4,j),l()()()),t&2&&(p("isLoading",r.isLoading()),a(2),h(r.isAdmin()?2:-1),a(2),S(r.projects()))},dependencies:[w,k,A],styles:[".button-form[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;margin-bottom:20px}.projects-wrapper[_ngcontent-%COMP%]{padding:0 16px;max-width:1200px;margin:0 auto}.card-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;justify-content:center}"]})};export{V as ProjectsComponent};
