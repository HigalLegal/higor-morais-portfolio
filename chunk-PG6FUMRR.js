import{a as j}from"./chunk-BFBTHS5P.js";import{a as u}from"./chunk-TC64YTD3.js";import{a as L}from"./chunk-WNE5X5JO.js";import"./chunk-XGWKEUC7.js";import{a as G}from"./chunk-Y5D3OK6F.js";import"./chunk-GN475L4L.js";import{a as I}from"./chunk-2NGBAERZ.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{n as k}from"./chunk-6BXR4CBA.js";import"./chunk-QQMGSK2W.js";import"./chunk-N6PF2LVR.js";import{a as A}from"./chunk-XFF5VJPY.js";import"./chunk-GQH7GEWZ.js";import"./chunk-7NQHDTFN.js";import{a as E}from"./chunk-QOSKVCJ4.js";import{D as h,E as $}from"./chunk-FO7KHA5M.js";import{m as R}from"./chunk-R43BVMU7.js";import{Ab as g,Bb as o,Cb as a,Db as M,Hb as z,Kb as D,Lb as m,Va as c,_ as v,_a as n,gb as p,hb as w,ia as _,ja as y,pc as H,sa as s,vb as x,wb as S,x as f,xb as b,yb as C,zb as T}from"./chunk-XWV3PDOS.js";var P=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=w({type:i});static \u0275inj=v({imports:[u,h,u,h]})}return i})();function Q(i,t){if(i&1&&(o(0,"div",2),M(1,"app-button-form",5),a()),i&2){let e=m();c(),g("text",e.i18n.register)}}function U(i,t){if(i&1){let e=z();o(0,"app-card-image",6),D("onClick",function(){let l=_(e).$implicit,d=m();return y(d.handleDelete(l.id))}),a()}if(i&2){let e=t.$implicit,r=t.$index,l=m();g("title",e.name)("imageUrl",e.urlImage)("url",e.urlCertificate)("technologiesUsed",l.descriptionsTechnologies()[r])("urlRouterFormEdit","editar-curso/"+e.id)}}var F=class i{constructor(t,e,r,l){this.translate=t;this.tokenService=e;this.courseService=r;this.snackbarService=l;this.isAdmin.set(e.isAdmin()),H(()=>{let d=this.courses(),B=this.i18n;if(d.length>0&&B.technologies.length>0){let O=d.map(V=>this.generateDescription(V.technologies));this.descriptionsTechnologies.set(O)}})}TRANSLATE_JSON="courses";courses=s([]);descriptionsTechnologies=s([]);i18n={technologies:"",technology:"",register:""};isAdmin=s(!1);isLoading=s(!0);ngOnInit(){this.searchCourses(),this.insertI18n()}ngAfterViewInit(){setTimeout(()=>{this.isLoading.set(!1)},200)}handleDelete(t){this.courseService.delete(t).subscribe({next:()=>{this.openSnackbar(),this.searchCourses()},error:e=>{console.error("Erro inesperado",e)}})}searchCourses(){this.courseService.getAll().subscribe({next:t=>{this.courses.set(t)},error:t=>{console.error("Erro inesperado! ",t)}})}openSnackbar(){this.snackbarService.openSnackBarSucess("Exclu\xEDdo com exito!")}recoverValue(t){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${t}`)}generateDescription(t){let e=t.length>1?this.i18n.technologies:this.i18n.technology;return G(e,t)}observableRequests(){return[this.recoverValue("technologies"),this.recoverValue("technology"),this.recoverValue("register")]}insertI18n(){f(this.observableRequests()).subscribe({next:([t,e,r])=>{this.i18n={technologies:t,technology:e,register:r}},error:t=>console.error("Erro inesperado! "+t)})}static \u0275fac=function(e){return new(e||i)(n($),n(A),n(j),n(k))};static \u0275cmp=p({type:i,selectors:[["app-courses"]],decls:6,vars:2,consts:[[3,"isLoading"],[1,"courses-wrapper"],[1,"button-form"],[1,"card-grid"],[3,"title","imageUrl","url","technologiesUsed","urlRouterFormEdit"],["urlRouter","inserir-curso",3,"text"],[3,"onClick","title","imageUrl","url","technologiesUsed","urlRouterFormEdit"]],template:function(e,r){e&1&&(o(0,"app-api-loading",0)(1,"div",1),x(2,Q,2,1,"div",2),o(3,"div",3),C(4,U,1,5,"app-card-image",4,b),a()()()),e&2&&(g("isLoading",r.isLoading()),c(2),S(r.isAdmin()?2:-1),c(2),T(r.courses()))},dependencies:[L,P,R,I,E],styles:[".button-form[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;margin-bottom:20px}.courses-wrapper[_ngcontent-%COMP%]{padding:0 16px;max-width:1200px;margin:0 auto}.card-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;justify-content:center}app-card-image[_ngcontent-%COMP%]{flex:1 1 300px;max-width:100%}"]})};export{F as CoursesComponent};
