import{a as z}from"./chunk-PJMEV3LH.js";import{a as q,e as J}from"./chunk-XGWKEUC7.js";import{a as K}from"./chunk-2NGBAERZ.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{m as D,n as $}from"./chunk-6BXR4CBA.js";import{b as N,c as X}from"./chunk-QQMGSK2W.js";import{a as Q}from"./chunk-N6PF2LVR.js";import{a as F}from"./chunk-XFF5VJPY.js";import{j as A}from"./chunk-GQH7GEWZ.js";import{t as B,v as R}from"./chunk-7NQHDTFN.js";import{a as W}from"./chunk-QOSKVCJ4.js";import{E as j}from"./chunk-FO7KHA5M.js";import{m as L}from"./chunk-R43BVMU7.js";import{Ab as l,Bb as n,Cb as s,Db as v,Hb as x,Kb as g,Lb as c,Pb as T,Qb as w,Rb as O,Sa as b,Va as r,Wb as E,Zb as d,_a as p,_b as I,ac as P,ec as V,gb as k,ia as u,ja as h,sa as m,vb as _,wb as S,x as C,yb as y,zb as M}from"./chunk-XWV3PDOS.js";var U=["carouselWrapper"],H=(o,e)=>e.id;function Y(o,e){if(o&1&&(n(0,"div",2),v(1,"app-button-form",8),s()),o&2){let t=c();r(),l("text",t.i18n.register)}}function Z(o,e){if(o&1){let t=x();n(0,"div",10)(1,"span"),d(2),s()(),n(3,"div",11),v(4,"app-button-form",12),n(5,"app-button-action",13),g("clicked",function(){u(t);let a=c().$implicit,f=c();return h(f.handleDelete(a.id))}),s()()}if(o&2){let t=c().$implicit,i=c();r(2),P("",i.i18n.importanceLevel,"",t.importanceLevel),r(2),l("text",i.i18n.edit)("urlRouter","editar-tecnologia/"+t.id),r(),l("text",i.i18n.del)}}function ee(o,e){if(o&1&&(n(0,"mat-card",7),v(1,"img",9),n(2,"p"),d(3),s(),_(4,Z,6,5),s()),o&2){let t=e.$implicit,i=c();r(),l("alt",V(t.name))("src",t.urlImage,b),r(2),I(t.name),r(),S(i.isAdmin()?4:-1)}}var G=class o{constructor(e,t,i,a){this.translate=e;this.technologyService=t;this.tokenService=i;this.snackBarService=a;this.isAdmin.set(i.isAdmin())}TRANSLATE_JSON="skills";touchStartX=0;touchEndX=0;isAdmin=m(!1);isButtonDeleting=m(!1);index=m(0);technologies=[];i18n={importanceLevel:"",register:"",edit:"",del:""};isLoading=m(!0);carouselWrapper;ngOnInit(){this.insertI18N(),this.searchTechnologies()}ngAfterViewInit(){setTimeout(()=>{this.isLoading.set(!1)},200),this.addSwipeListeners()}next(){this.index.update(e=>(e+1)%this.technologies.length)}prev(){this.index.update(e=>(e-1+this.technologies.length)%this.technologies.length)}handleDelete(e){let t=this.technologies.filter(i=>e==i.id)[0].name;this.technologyService.delete(e).subscribe({next:()=>{this.openSucessDelete(t),this.searchTechnologies(),this.isButtonDeleting.set(!0)},error:i=>{console.error("Erro inesperado! ",i),this.isButtonDeleting.set(!0)}}),this.isButtonDeleting.set(!1)}searchTechnologies(){this.technologyService.getAll().subscribe({next:e=>{this.technologies=e},error:e=>{console.error("Erro inesperado! ",e)}})}openSucessDelete(e){this.snackBarService.openSnackBarSucess(`${e} exclu\xEDdo com sucesso!`)}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}observableRequests(){return[this.recoverValue("importanceLevel"),this.recoverValue("register"),this.recoverValue("edit"),this.recoverValue("del")]}insertI18N(){C(this.observableRequests()).subscribe({next:([e,t,i,a])=>{this.i18n={importanceLevel:e,register:t,edit:i,del:a}},error:e=>console.error("Erro inesperado! "+e)})}addSwipeListeners(){let e=this.carouselWrapper.nativeElement;e.addEventListener("touchstart",t=>{this.touchStartX=t.changedTouches[0].screenX}),e.addEventListener("touchend",t=>{this.touchEndX=t.changedTouches[0].screenX,this.handleSwipeGesture()})}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX;Math.abs(e)<50||(e<0?this.next():this.prev())}static \u0275fac=function(t){return new(t||o)(p(j),p(z),p(F),p($))};static \u0275cmp=k({type:o,selectors:[["app-skills"]],viewQuery:function(t,i){if(t&1&&T(U,5),t&2){let a;w(a=O())&&(i.carouselWrapper=a.first)}},decls:14,vars:4,consts:[["carouselWrapper",""],[3,"isLoading"],[1,"button-form"],[1,"carousel-container"],["mat-icon-button","",3,"click"],[1,"carousel-wrapper"],[1,"carousel-track"],[1,"carousel-item"],["urlRouter","inserir-tecnologia",3,"text"],[3,"src","alt"],[1,"importance-level"],[1,"actions"],[3,"text","urlRouter"],[3,"clicked","text"]],template:function(t,i){if(t&1){let a=x();n(0,"app-api-loading",1),_(1,Y,2,1,"div",2),n(2,"div",3)(3,"button",4),g("click",function(){return u(a),h(i.prev())}),n(4,"mat-icon"),d(5,"chevron_left"),s()(),n(6,"div",5,0)(8,"div",6),y(9,ee,5,5,"mat-card",7,H),s()(),n(11,"button",4),g("click",function(){return u(a),h(i.next())}),n(12,"mat-icon"),d(13,"chevron_right"),s()()()()}t&2&&(l("isLoading",i.isLoading()),r(),S(i.isAdmin()?1:-1),r(7),E("transform","translateX(-"+i.index()*100+"%)"),r(),M(i.technologies))},dependencies:[R,B,X,N,J,q,L,A,K,Q,W,D],styles:[".button-form[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:50px}.button-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#101d20}.carousel-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;margin-top:120px}.carousel-wrapper[_ngcontent-%COMP%]{width:400px;overflow:hidden}.carousel-track[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease-in-out;justify-content:space-between}.carousel-track[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{box-shadow:none}.carousel-item[_ngcontent-%COMP%]{min-width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:none;font-family:MedievalSharp;color:var(--font-color)}.carousel-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px}.carousel-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:15px}.carousel-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   app-button-form[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px}img[_ngcontent-%COMP%]{max-width:60%;height:auto}"]})};export{G as SkillsComponent};
