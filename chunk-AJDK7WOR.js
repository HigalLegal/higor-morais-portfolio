import{a as $}from"./chunk-QZQENJXC.js";import{a as w,d as j,e as D,f as U,g as J}from"./chunk-PLVZUAG5.js";import{d as I,h as T,i as F,j as R,k as O,l as N,m as L,o as V,p as E,q as P}from"./chunk-I7IS6JXF.js";import{a as q}from"./chunk-PJMEV3LH.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{n as A}from"./chunk-6BXR4CBA.js";import"./chunk-QQMGSK2W.js";import"./chunk-XFF5VJPY.js";import{e as _,g as C}from"./chunk-GQH7GEWZ.js";import{u as k,v as B}from"./chunk-7NQHDTFN.js";import{E as x}from"./chunk-FO7KHA5M.js";import{k as M,m as S}from"./chunk-R43BVMU7.js";import{$b as y,Ab as m,Bb as r,Cb as a,Kb as c,Va as o,Zb as d,_a as s,_b as g,gb as f,hc as p,oc as b,sa as u,x as h}from"./chunk-XWV3PDOS.js";var G=()=>({standalone:!0}),K=()=>({"pointer-events":"none",opacity:"0.5"}),z=()=>({}),H=class v{constructor(e,i,t,n,l){this.translate=e;this.router=i;this.activeRoute=t;this.technologyService=n;this.snackbarService=l;this.currentRouter=this.router.url}TRANSLATE_JSON="formTechnology";idRouter=null;name=u("");importanceLevel=u(null);image=u(null);currentRouter="";i18n={nameTechnology:"",importanceLevel:"",submit:"",submitSucess:""};disableButton=b(()=>{let e=this.router.url,i=this.name().trim().length>3,t=this.importanceLevel()!==null,n=!e.includes("inserir-tecnologia")||!!this.image();return!(i&&t&&n)});ngOnInit(){this.insertI18N(),this.insertId()}ngAfterViewInit(){this.insertFields()}onSubmit(){let e={name:this.name(),importanceLevel:this.importanceLevel()};this.currentRouter.includes("inserir-tecnologia")?this.postCreate(e,this.image()):this.putUpdate(e,this.image())}insertFields(){this.idRouter&&this.technologyService.getById(this.idRouter).subscribe({next:e=>{this.name.set(e.name),this.importanceLevel.set(e.importanceLevel)}})}insertId(){this.activeRoute.paramMap.subscribe(e=>{this.idRouter=e.get("id")})}postCreate(e,i){this.technologyService.postCreate(e,this.image()).subscribe({next:()=>{this.openSnackBar(),this.clearFields()},error:t=>{console.error("Erro inesperado! ",t)}})}putUpdate(e,i){this.idRouter&&this.technologyService.putUpdate(this.idRouter,e,i).subscribe({next:()=>{this.openSnackBar(),this.router.navigate(["/"])},error:t=>{console.error("Erro inesperado! ",t)}})}openSnackBar(){this.snackbarService.openSnackBarSucess(this.i18n.submitSucess)}clearFields(){this.name.set(""),this.importanceLevel.set(null),this.image.set(null),this.clearImage()}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}clearImage(){let e=document.getElementById("fileInput");e.value=""}observableRequests(){return[this.recoverValue("nameTechnology"),this.recoverValue("importanceLevel"),this.recoverValue("submit"),this.recoverValue("submitSucess")]}insertI18N(){h(this.observableRequests()).subscribe({next:([e,i,t,n])=>{this.i18n={nameTechnology:e,importanceLevel:i,submit:t,submitSucess:n}},error:e=>console.error("Erro inesperado! "+e)})}static \u0275fac=function(i){return new(i||v)(s(x),s(C),s(_),s(q),s(A))};static \u0275cmp=f({type:v,selectors:[["app-form-technology"]],decls:13,vars:13,consts:[[1,"form-container"],["appearance","fill"],["matInput","","type","text","name","name","required","",3,"ngModelChange","ngModel","ngModelOptions"],["matInput","","type","number","name","importanceLevel","placeholder","N\xEDvel de import\xE2ncia","min","0","required","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"image","imageFile"],["mat-raised-button","","color","primary","type","submit",3,"click","ngStyle"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"form")(2,"mat-form-field",1)(3,"mat-label"),d(4),a(),r(5,"input",2),c("ngModelChange",function(l){return t.name.set(l)}),a()(),r(6,"mat-form-field",1)(7,"mat-label"),d(8),a(),r(9,"input",3),c("ngModelChange",function(l){return t.importanceLevel.set(l)}),a()(),r(10,"app-file-upload",4),c("image",function(l){return t.image.set(l)}),a(),r(11,"button",5),c("click",function(){return t.onSubmit()}),d(12),a()()()),i&2&&(o(4),g(t.i18n.nameTechnology),o(),m("ngModel",t.name())("ngModelOptions",p(9,G)),o(3),g(t.i18n.importanceLevel),o(),m("ngModel",t.importanceLevel())("ngModelOptions",p(10,G)),o(),m("imageFile",t.image()),o(),m("ngStyle",t.disableButton()?p(11,K):p(12,z)),o(),y(" ",t.i18n.submit," "))},dependencies:[P,N,I,L,T,F,E,V,O,R,D,j,w,J,U,B,k,S,M,$],styles:[".form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;width:100%;margin-top:200px}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   app-file-upload[_ngcontent-%COMP%]{margin-bottom:16px}","@media (max-width: 420px){.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:300px}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   app-file-upload[_ngcontent-%COMP%]{width:98%!important}}"]})};export{H as FormTechnologyComponent};
