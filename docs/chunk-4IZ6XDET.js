import{a as w}from"./chunk-J4OHAFBT.js";import{a as k}from"./chunk-MAGUGNDK.js";import{a as A}from"./chunk-Y5D3OK6F.js";import"./chunk-GN475L4L.js";import{a as P}from"./chunk-2NGBAERZ.js";import"./chunk-RZOFHZQL.js";import"./chunk-X2KLAOIO.js";import{n as I}from"./chunk-6BXR4CBA.js";import"./chunk-QQMGSK2W.js";import"./chunk-N6PF2LVR.js";import{a as y}from"./chunk-XFF5VJPY.js";import"./chunk-GQH7GEWZ.js";import"./chunk-7NQHDTFN.js";import{a as M}from"./chunk-QOSKVCJ4.js";import{E as O}from"./chunk-FO7KHA5M.js";import"./chunk-R43BVMU7.js";import{Ab as c,Bb as p,Cb as m,Db as _,Hb as S,Kb as T,Lb as l,Va as s,_a as o,gb as v,ia as x,ja as g,pc as E,sa as a,vb as h,wb as f,x as d,xb as u,yb as b,zb as C}from"./chunk-XWV3PDOS.js";function V(t,e){if(t&1&&(p(0,"div",2),_(1,"app-button-form",4),m()),t&2){let i=l();s(),c("text",i.i18n.register)}}function D(t,e){if(t&1){let i=S();p(0,"app-card",5),T("onAction",function(){let r=x(i).$implicit,N=l();return g(N.handleDelete(r.id))}),m()}if(t&2){let i=e.$implicit,n=e.$index,r=l();c("title",r.messagesTitle[n])("description",i.description)("technologiesUsed",r.messagesTechnologies[n])("hideTextByDefault",!0)("urlRouterFormEdit","editar-experiencia/"+i.id)}}var R=class t{constructor(e,i,n,r){this.translate=e;this.tokenService=i;this.experienceService=n;this.snackbarService=r;this.isAdmin.set(i.isAdmin()),E(()=>this.insertMessages())}TRANSLATE_JSON="experience";experiences=a([]);messagesTitle=[];messagesTechnologies=[];i18n={atual:"",tecnologiasTrabalhadas:"",register:""};isLoading=a(!0);isAdmin=a(!1);ngOnInit(){this.insertI18n(),this.insertExperiences()}ngAfterViewInit(){setTimeout(()=>{this.isLoading.set(!1)},200)}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}generateTitle(e){let{atual:i}=this.i18n;return`${e.companyName} | ${e.beginning} - ${e.end?e.end:i}`}generateSentence(e){let{tecnologiasTrabalhadas:i}=this.i18n;return A(i,e)}handleDelete(e){this.experienceService.delete(e).subscribe({next:()=>{this.openSnackbar(),this.insertExperiences()},error:i=>{console.error("Erro inesperado! ")}})}insertExperiences(){this.experienceService.getAll().subscribe({next:e=>{this.experiences.set(e)},error:e=>{console.error("Erro inesperado! ",e)}})}insertMessages(){this.i18n.tecnologiasTrabalhadas.length>0&&this.experiences().length>0&&(this.messagesTitle=this.experiences().map(e=>this.generateTitle(e)),this.messagesTechnologies=this.experiences().map(e=>this.generateSentence(e.technologiesWorked)))}openSnackbar(){this.snackbarService.openSnackBarSucess("Exclu\xEDdo com \xEAxito!")}insertI18n(){d(this.observableRequests()).subscribe({next:([e,i,n,r])=>{this.i18n={atual:e,tecnologiasTrabalhadas:i,register:n}},error:e=>{console.error("Erro inesperado! "+e)}})}observableRequests(){return[this.recoverValue("atual"),this.recoverValue("tecnologiasTrabalhadas"),this.recoverValue("register")]}static \u0275fac=function(i){return new(i||t)(o(O),o(y),o(w),o(I))};static \u0275cmp=v({type:t,selectors:[["app-experience"]],decls:5,vars:2,consts:[[3,"isLoading"],[1,"experience-container"],[1,"button-form"],[3,"title","description","technologiesUsed","hideTextByDefault","urlRouterFormEdit"],["urlRouter","inserir-experiencia",3,"text"],[3,"onAction","title","description","technologiesUsed","hideTextByDefault","urlRouterFormEdit"]],template:function(i,n){i&1&&(p(0,"app-api-loading",0)(1,"div",1),h(2,V,2,1,"div",2),b(3,D,1,5,"app-card",3,u),m()()),i&2&&(c("isLoading",n.isLoading()),s(2),f(n.isAdmin()?2:-1),s(),C(n.experiences()))},dependencies:[k,M,P],styles:[".experience-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.experience-container[_ngcontent-%COMP%]   .button-form[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;margin-bottom:20px}.experience-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{max-width:750px;margin-top:20px;padding-bottom:20px;border-bottom:1px solid var(--secondary-color)}.experience-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:last-child{border-bottom:none}","@media (max-width: 790px){.experience-container[_ngcontent-%COMP%]{padding-inline:40px}.experience-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:500px}}@media (max-width: 570px){.experience-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:350px}}@media (max-width: 370px){.experience-container[_ngcontent-%COMP%]{padding-inline:30px}.experience-container[_ngcontent-%COMP%]   app-card-experience[_ngcontent-%COMP%]{max-width:250px}}"]})};export{R as ExperienceComponent};
