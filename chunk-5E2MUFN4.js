import{a as B,d as U,e as P,f as H,g as D}from"./chunk-PLVZUAG5.js";import{d as N,h as L,i as O,j as w,k as x,l as R,p as k,q as E}from"./chunk-I7IS6JXF.js";import{a as q}from"./chunk-EM2WCG4M.js";import{a as V}from"./chunk-XFF5VJPY.js";import{g as T}from"./chunk-GQH7GEWZ.js";import{c as I,u as F,v as j}from"./chunk-7NQHDTFN.js";import{E as A}from"./chunk-FO7KHA5M.js";import{k as S,m as y}from"./chunk-R43BVMU7.js";import{Ab as l,Bb as n,Cb as a,Kb as d,Va as r,Z as M,Zb as c,_a as m,_b as v,ba as h,gb as _,hc as p,oc as C,sa as f,x as b}from"./chunk-XWV3PDOS.js";var u=class o{constructor(e){this.http=e}BASE_URL=`${q.UrlApiBase}/users`;postLogin(e){return this.http.post(`${this.BASE_URL}/login`,e)}static \u0275fac=function(t){return new(t||o)(h(I))};static \u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})};var $=()=>({standalone:!0}),X=()=>({"pointer-events":"none",opacity:"0.5"}),z=()=>({}),J=class o{constructor(e,t,i,s){this.translate=e;this.userService=t;this.tokenService=i;this.router=s}TRANSLATE_JSON="login";MIN=3;email=f("");password=f("");i18n={email:"",password:""};disableButton=C(()=>this.email().length<=this.MIN||this.password().length<=this.MIN);ngOnInit(){this.insertI18N()}onLogin(){let e={email:this.email(),password:this.password()};this.userService.postLogin(e).subscribe({next:t=>{this.tokenService.setToken(t.jwt),this.redirectToHome()},error:t=>{console.error("Erro inesperado! ",t)}})}redirectToHome(){this.router.navigate(["/"])}recoverValue(e){return this.translate.retrieveKeyValueObservable(`${this.TRANSLATE_JSON}.${e}`)}observableRequests(){return[this.recoverValue("email"),this.recoverValue("password")]}insertI18N(){b(this.observableRequests()).subscribe({next:([e,t])=>{this.i18n={email:e,password:t}},error:e=>{console.error("Erro inesperado! "+e)}})}static \u0275fac=function(t){return new(t||o)(m(A),m(u),m(V),m(T))};static \u0275cmp=_({type:o,selectors:[["app-login"]],decls:12,vars:9,consts:[[1,"form-container"],[3,"ngSubmit"],["appearance","fill"],["matInput","","name","email","required","",3,"ngModel","ngModelChange","ngModelOptions"],["matInput","","type","password","name","password","required","",3,"ngModel","ngModelChange","ngModelOptions"],["mat-raised-button","","color","primary","type","submit",3,"ngStyle"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"form",1),d("ngSubmit",function(){return i.onLogin()}),n(2,"mat-form-field",2)(3,"mat-label"),c(4),a(),n(5,"input",3),d("ngModel",function(){return i.email()})("ngModelChange",function(g){return i.email.set(g)}),a()(),n(6,"mat-form-field",2)(7,"mat-label"),c(8),a(),n(9,"input",4),d("ngModel",function(){return i.password()})("ngModelChange",function(g){return i.password.set(g)}),a()(),n(10,"button",5),c(11," Login "),a()()()),t&2&&(r(4),v(i.i18n.email),r(),l("ngModelOptions",p(5,$)),r(3),v(i.i18n.password),r(),l("ngModelOptions",p(6,$)),r(),l("ngStyle",i.disableButton()?p(7,X):p(8,z)))},dependencies:[E,R,N,L,O,k,x,w,P,U,B,D,H,j,F,y,S],styles:['.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;width:100%;margin-top:200px;padding:60px 30px;background:url("./media/background-contato-7VNEUX3C.jpg");border:3px solid var(--secondary-color);border-radius:32px}',"@media (max-width: 500px){.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:120px;max-width:none;width:280px}}"]})};export{J as LoginComponent};
